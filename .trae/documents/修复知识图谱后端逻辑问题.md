## 修复知识图谱后端逻辑问题

### 问题分析
1. **查询结果与预期不符**：需要检查查询逻辑和数据处理流程
2. **kg_core_impl.py核心逻辑**：需要梳理和优化重复函数，确保逻辑正确
3. **hybrid_store_core_implement.py#L455-495**：需要检查create_news_event函数的实现问题

### 修复计划

#### 1. 检查和优化kg_core_impl.py
- **process_content函数**：检查内容处理流程，确保实体和关系处理正确
- **_process_entities_with_vector_search函数**：优化实体处理逻辑，减少重复代码
- **_process_relations函数**：确保关系处理正确，实体映射使用合理
- **_build_query_context函数**：修复静态方法的self参数问题

#### 2. 检查hybrid_store_core_implement.py#L455-495
- 检查create_news_event函数的实现，确保向量索引和数据库操作正确
- 检查事务处理和错误处理逻辑

#### 3. 修复查询结果问题
- 检查查询逻辑，确保上下文构建正确
- 检查大模型调用和响应处理

### 实施步骤
1. 修复kg_core_impl.py中的_build_query_context函数，移除静态方法的self参数
2. 优化kg_core_impl.py中的重复代码，确保逻辑一致性
3. 检查hybrid_store_core_implement.py中的create_news_event函数，确保实现正确
4. 验证修复后的代码，确保查询结果符合预期

### 预期结果
- 修复后的代码逻辑正确，没有重复函数
- 查询结果与预期一致
- 内容处理流程正常，实体和关系处理正确
- 新闻事件创建功能正常