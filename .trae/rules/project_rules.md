# Python后端项目开发规则

## 项目概述
遵循模块化、可维护、高性能的开发原则。

## 开发经验积累
- 对开发中遇到的问题，总结为经验，生成经验文档code_experience.md，需要时进行查找

## 项目特定规则（优先级最高）
- 本项目使用 **Python 3.10+**，请确保所有代码兼容此版本
- 数据库操作必须使用**异步方式**，禁止同步操作
- API响应统一使用JSON格式，遵循统一的响应结构
- 优先使用最新的依赖包
- 使用虚拟环境venv来启动程序
- 深度思考所有方案后，在输出最优代码
- 保持模块独立性，大厂开发规范
- 超过500行的文件需要进行拆分
- 所有代码必须经过严格的测试，包括单元测试、集成测试和端到端测试
- 严禁为了测试通过，绕开核心逻辑实现。
- 大模型调用结果要求使用json格式返回，严禁其他格式

## 项目核心代码规则
- 按照 ${功能}_${action}_${文件定位}.${文件类型} 的命名规范
- 创建文件时每个文件都添加注释，注释内容为文件的核心功能精炼描述
- 后端python代码每个package，添加readme.md文件，文件内容为package的核心功能描述以及使用方式

### 核心开发规范（动态加载相关内容）

- **描述**：定义项目结构、模块划分与目录规范  
  **加载规则文件**：`trae_rules/project_structure.md`  
  **生效范围**：全局生效

- **描述**：统一 Python 代码风格、命名与注释规范  
  **加载规则文件**：`trae_rules/coding_style.md`  
  **生效范围**：.py 生效

- **描述**：规范数据库模型、迁移与异步查询逻辑  
  **加载规则文件**：`trae_rules/database.md`  
  **生效范围**：数据库设计

- **描述**：管理大模型调用、提示词、Prompt编写规范  
  **加载规则文件**：`trae_rules/llm.md`  
  **生效范围**：大模型调用/prompt

- **描述**：统一 RESTful 接口设计、请求响应与错误处理  
  **加载规则文件**：`trae_rules/api_design.md`  
  **生效范围**：RESTful 接口设计

- **描述**：指导服务分层、依赖注入与接口抽象  
  **加载规则文件**：`trae_rules/design.md`  
  **生效范围**：服务分层/依赖注入/接口抽象

- **描述**：规范代码 Review、重复代码检测与重构流程  
  **加载规则文件**：`trae_rules/review_code.md`  
  **生效范围**：代码 Review

- **描述**：定义 FastAPI 路由、中间件、异常与生命周期管理  
  **加载规则文件**：`trae_rules/fastapi.md`  
  **生效范围**：FastAPI 路由/中间件/异常/生命周期管理

- **描述**：统一前端 HTML、CSS、JavaScript 与组件规范  
  **加载规则文件**：`trae_rules/frontend.md`  
  **生效范围**：.js .html .css

- **描述**：统一测试代码规范、测试框架与测试用例设计  
  **加载规则文件**：`trae_rules/tests.md`  
  **生效范围**：.py 生效

- **描述**：统一经验沉淀规范、经验文件与经验使用规范  
  **加载规则文件**：`trae_rules/experience.md`  
  **生效范围**：全局生效


trae_rules 目录在代码根目录上，按需进行加载。

## 编码规范
- 优先考虑设计模式开发
