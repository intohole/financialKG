# Python后端项目开发规则

## 项目概述
- 遵循模块化、可维护、高性能的开发原则。
- 遵循少即是多规则，聚焦核心功能，避免过度设计。

## 项目特定规则
- 本项目使用 **Python 3.10+**，请确保所有代码兼容此版本
- 数据库操作必须使用**异步方式**，禁止同步操作
- API响应统一使用JSON格式，遵循统一的响应结构
- 所有环境配置必须通过环境变量管理，禁止硬编码
- 运行python使用python3命令行
- 优先使用最新的依赖包
- 使用虚拟环境venv来启动程序
- 深度思考所有方案后，在输出最优代码
- 保持模块独立性，符合大厂开发规范
- 所有代码必须经过严格的测试，包括单元测试、集成测试和端到端测试
- 测试过程中不得为了通过测试而强行添加临时性或不合理的代码

### 核心开发规范
- **描述**：定义项目的技术栈、架构模式  
  **加载规则文件**：`trae_rules/project_overview.md`  
  **生效范围**：全局生效，特别是在项目初始化时，需要根据项目需求进行调整

- **描述**：定义项目结构、模块划分与目录规范  
  **加载规则文件**：`trae_rules/project_structure.md`  
  **生效范围**：全局生效

- **描述**：统一 Python 代码风格、命名与注释规范  
  **加载规则文件**：`trae_rules/coding_style.md`  
  **生效范围**：仅 .py 生效

- **描述**：规范数据库模型、迁移与异步查询逻辑  
  **加载规则文件**：`trae_rules/database.md`  
  **生效范围**：仅数据库相关代码，包括模型定义、迁移脚本、查询逻辑等

- **描述**：管理大模型调用、提示词开发
  **加载规则文件**：`trae_rules/llm.md`  
  **生效范围**：仅大模型调用相关代码，包括提示词定义

- **描述**：统一 RESTful 接口设计、请求响应与错误处理  
  **加载规则文件**：`trae_rules/api_design.md`  
  **生效范围**：仅 RESTful 接口设计相关代码，包括路由定义、请求响应格式、错误处理等

- **描述**：指导服务分层、依赖注入与接口抽象  
  **加载规则文件**：`trae_rules/design.md`  
  **生效范围**：仅服务分层/依赖注入/接口抽象相关代码，包括服务层、控制器、数据访问层等

- **描述**：规范代码 Review、重复代码检测与重构流程  
  **加载规则文件**：`trae_rules/review_code.md`  
  **生效范围**：仅代码 Review 相关代码，包括代码规范、重复代码检测、重构建议等

- **描述**：定义 FastAPI 路由、中间件、异常与生命周期管理  
  **加载规则文件**：`trae_rules/fastapi.md`  
  **生效范围**：仅 FastAPI 路由/中间件/异常/生命周期管理相关代码，包括路由定义、中间件配置、异常处理、应用生命周期管理等

- **描述**：统一前端 HTML、CSS、JavaScript 与组件规范  
  **加载规则文件**：`trae_rules/frontend.md`  
  **生效范围**：仅前端相关代码，包括 HTML、CSS、JavaScript 与组件等

- **描述**：统一测试代码规范、测试框架与测试用例设计  
  **加载规则文件**：`trae_rules/tests.md`  
  **生效范围**：仅测试相关代码，包括测试代码规范、测试框架（如 pytest、unittest 等）、测试用例设计等

- **描述**：统一经验沉淀规范、经验文件与经验使用规范  
  **加载规则文件**：`trae_rules/experience.md`  
  **生效范围**：仅经验相关代码，包括经验文件、经验使用规范等
